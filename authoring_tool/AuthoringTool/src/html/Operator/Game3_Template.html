<!DOCTYPE html>
<html>
<head>
	<meta charset="ISO-8859-1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
</head>

<body ng-app="GoPoleis" >

	<div class="col-sm-9" ng-controller="getGame3Controller">
		<div ng-show="getGame3Page">
			<h1 style="margin:20px;"><u>Cultural Heritages</u></h1>
			<fieldset style="margin-top:50px; margin-left:20px;""> 	
	           	<label for="search" style="display: inline-block; vertical-align: bottom;" >
		        	<span class="glyphicon glyphicon-search"></span>
		        	Search: 
		        </label>
	      		<input type="text" ng-model="searchBoxGame3.name" class="form-control" style="width:250px; display: inline-block; vertical-align: bottom;"/>
	        </fieldset>
   	        <ul style="list-item-style:none; margin-left:0px; padding-left:0px; width: 1500px;">
	       		<li ng-repeat="ch in results | filter:searchBoxGame3" class="thumbnail col-sm-3" style=" margin:20px; padding: 20px; width:450px; text-align:left;" 
	       			ng-model="getGame3CHs.selection" ng-value="ch.name" id="{{ch.name}}" ng-click="getGame3CH(ch.code)">	        	
	        		<h4 ch.name="selection">
	        			<img ng-src="{{ch.path}}{{ch.filename}}" style="height: 80px; width: 80px;"/>
	        			{{ ch.name }}
	        		</h4>	
	       		</li>
	        </ul>
        </div>

 		<div ng-show="chPage">
			        
			<h1 style="margin:20px;"><u>{{getCH.name}}</u></h1><br><br>
			
			<fieldset style="margin-top:30px; margin-left:20px;"> 	
		     	<label for="description" style="display: inline-block; vertical-align: bottom;">
		     		Description: 
				</label>
				<input type="text" class="form-control" ng-model="getCH.description" style="width:850px; display: inline-block;" ng-readonly="true" disabled>
			</fieldset>	
			
			<fieldset style="margin-top:30px; margin-left:20px;"> 	
				<p id="imgCode" ng-show="false" ng-model="imgCode"></p> 
		     	<label for="image" style="display:inline-block;">
		     		Image:  
				</label>
				<img ng-src="{{ thumbnail.dataUrl }}" style="width:200px; heigth:200px; border: 1px solid black;"/>
			</fieldset>
					
					
			<fieldset style="margin-top:30px; margin-left:20px; "> 	
				<label style="display: inline-block;">
		     		Games:  
				</label>
				<span class="glyphicon glyphicon-check" ng-click="game1()" style="margin-left: 30px;" ng-show="g1">1 </span>
	     		<span class="glyphicon glyphicon-unchecked" ng-click="game1()" style="margin-left: 30px;" ng-hide="g1">1 </span>
	     		
	     		<span class="glyphicon glyphicon-check" ng-click="game2()" style="margin-left: 30px;" ng-show="g2">2 </span>
	     		<span class="glyphicon glyphicon-unchecked" ng-click="game2()" style="margin-left: 30px;" ng-hide="g2">2 </span>
	     		
	     		<span class="glyphicon glyphicon-check" ng-click="game3()" style="margin-left: 30px;" ng-show="g3">3 </span>
	     		<span class="glyphicon glyphicon-unchecked" ng-click="game3()" style="margin-left: 30px;" ng-hide="g3">3 </span>
	     		
	     		<span class="glyphicon glyphicon-check" ng-click="game4()" style="margin-left: 30px;" ng-show="g4">4 </span>
	     		<span class="glyphicon glyphicon-unchecked" ng-click="game4()" style="margin-left: 30px;" ng-hide="g4">4 </span>
			</fieldset>

			<fieldset style="margin-top:30px; margin-left:20px;"> 	
		     	<label for="coordinates" style="display: inline-block; vertical-align: bottom; width:150px;">
		     		Coordinates: 
				</label>
				Latitude <input type="text" class="form-control" ng-model="getCH.latitude" style="width:130px; display: inline-block;" ng-readonly="true" disabled>
				Longitude <input type="text" class="form-control" ng-model="getCH.longitude" style="width:130px; display: inline-block;" ng-readonly="true" disabled>
			</fieldset>	
			
			<fieldset style="margin-top:30px; margin-left:20px;"> 
				<label for="region" style="display: inline-block; vertical-align: bottom;">
		     		Region: 
				</label>
				<input type="text" class="form-control" ng-model="getCH.region" style="width:200px; display: inline-block;" ng-readonly="true" disabled>	
		     	<label for="province" style="display: inline-block; vertical-align: bottom; margin-left:30px;">
		     		Province: 
				</label>
				<input type="text" class="form-control" ng-model="getCH.province" style="width:200px; display: inline-block;" ng-readonly="true" disabled>
			</fieldset>
			
			<fieldset style="margin-top:30px; margin-left:20px;"> 	
		     	<label for="historicalPeriod" style="display: inline-block; vertical-align: bottom;">
		     		Historical period: 
				</label>
				<input type="text" class="form-control" ng-model="getCH.historicalPeriod" style="width:200px; display: inline-block;" ng-readonly="true" disabled>
				<label for="typeOfStructure" style="display: inline-block; vertical-align: bottom; margin-left:20px;">
		     		Type of structure: 
				</label>
				<input type="text" class="form-control" ng-model="getCH.typeOfStructure" style="width:200px; display: inline-block;" ng-readonly="true" disabled>
			</fieldset>
			
			<fieldset style="margin-top:60px; margin-left:200px; margin-bottom:50px;"> 			
				<a href="#"ng-click="cancel()">Cancel</a>
			</fieldset>
  
		</div> 

</body>
</html>
<script>
var app = angular.module("GoPoleis", []);
app.controller('getGame3Controller', function($scope, $http, $window) {
	$scope.getGame3Page=true;
	$scope.chPage=false;

	$http({
		method : "GET",
		url : "/getGame3CHs/user3"				//MODIFICARE --> devi fare la get dello user loggato e metterla al posto di user3!!!
	}).then(function mySucces(response) {
		$scope.results  = response.data;
	}, function myError(response) {
		$scope.results  = response.statusText;
	});
		
	
	$scope.getGame3CH = function(chCode){ 
		$scope.getGame3Page=false;
		$scope.chPage=true;
		$scope.getCH={};
		$scope.g1=false;
		$scope.g2=false;
		$scope.g3=false;
		$scope.g4=false;

		$http({
			method : "GET",
			url : "/getCH/"+chCode
		}).then(function mySucces(response) {
			results  = response.data;	
			if (results.length > 0){
				$scope.getCH.name = results[0].name;
				$scope.getCH.description = results[0].description;
				$scope.thumbnail = { dataUrl: results[0].path+results[0].filename };	
				$scope.g1 = transformInBoolean(results[0].g1);
				$scope.g2 = transformInBoolean(results[0].g2);
				$scope.g3 = transformInBoolean(results[0].g3);
				$scope.g4 = transformInBoolean(results[0].g4);
				$scope.getCH.latitude = results[0].latitude;
				$scope.getCH.longitude = results[0].longitude;
				$scope.getCH.region = results[0].region;
				$scope.getCH.province = results[0].provName;
				$scope.getCH.historicalPeriod = results[0].historicalperiod;
				$scope.getCH.typeOfStructure = results[0].structuretype;
			}
		}, function myError(response) {
			$scope.results  = response.statusText;
		});
		
		parent.window.enableGame3SubButtons(true, chCode);
		
		function transformInBoolean(value) {
	    	if(value=="true"){	return true;	}
	    	else{	return false;	}       
	    }
	    
	}
	
	$scope.cancel = function(){ 
		window.location.reload();
		parent.window.enableGame3SubButtons(false, null);
	}	
		
});
</script>