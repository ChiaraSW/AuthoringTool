<!DOCTYPE html>
<html>
<head>
	<meta charset="ISO-8859-1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
</head>

<body ng-app="GoPoleis" >

	<div class="col-sm-9" ng-controller="getGame1Controller">
		<div ng-show="getGame1Page">
			<h1 style="margin:20px;"><u>Cultural Heritages</u></h1>
			<fieldset style="margin-top:50px; margin-left:20px;""> 	
	           	<label for="search" style="display: inline-block; vertical-align: bottom;" >
		        	<span class="glyphicon glyphicon-search"></span>
		        	Search: 
		        </label>
	      		<input type="text" ng-model="searchBoxGame1.name" class="form-control" style="width:250px; display: inline-block; vertical-align: bottom;"/>
	        </fieldset>
   	        <ul style="list-item-style:none; margin-left:0px; padding-left:0px; width: 1500px;">
	       		<li ng-repeat="ch in results | filter:searchBoxGame1" class="thumbnail col-sm-3" style=" margin:20px; padding: 20px; width:450px; text-align:left;" 
	       			ng-model="getGame1CHs.selection" ng-value="ch.name" id="{{ch.name}}" ng-click="getGame1CH(ch.code)">	        	
	        		<h4 ch.name="selection">
	        			<img ng-src="{{ch.path}}" style="height: 80px; width: 80px;"/>
	        			{{ ch.name }}
	        		</h4>	
	       		</li>
	        </ul>
        </div>
        
        
       <div ng-show="chPage">
			        
			<h1 style="margin:20px;"><u>{{getCH.name}}</u></h1><br><br>
			
			<fieldset style="margin-top:30px; margin-left:20px;"> 	
		     	<label for="description" style="display: inline-block; vertical-align: bottom;">
		     		Description: 
				</label>
				<input type="text" class="form-control" ng-model="getCH.description" style="width:850px; display: inline-block;" ng-readonly="true" disabled>
			</fieldset>
			
 			<fieldset style="margin-top:30px; margin-left:20px;"> 	
		     	<label for="image" style="display: inline-block;">
		     		Image:  
				</label>
				<img ng-src="{{getCH.path}}" ng-model="getCH.path" style="width: 200px; heigth:200px; border: 1px solid black; "/>
			</fieldset>
			
			<fieldset style="margin-top:30px; margin-left:20px;"> 	
				<label for="games" style="display: inline-block;">
		     		Games:  
				</label>
		     	<form style="display: inline-block;">			
					<input type="checkbox" ng-model="getCH.g1" ng-true-value="1" ng-false-value="0" ng-readonly="true" disabled> 1
					<input type="checkbox" ng-model="getCH.g2" ng-true-value="1" ng-false-value="0" ng-readonly="true" disabled> 2
		          	<input type="checkbox" ng-model="getCH.g3" ng-true-value="1" ng-false-value="0" ng-readonly="true" disabled> 3
		          	<input type="checkbox" ng-model="getCH.g4" ng-true-value="1" ng-false-value="0" ng-readonly="true" disabled> 4      
				</form>
			</fieldset>
			
			<fieldset style="margin-top:30px; margin-left:20px;"> 	
		     	<label for="coordinates" style="display: inline-block; vertical-align: bottom; width:150px;">
		     		Coordinates: 
				</label>
				Latitude <input type="text" class="form-control" ng-model="getCH.latitude" style="width:100px; display: inline-block;" ng-readonly="true" disabled>
				Longitude <input type="text" class="form-control" ng-model="getCH.longitude" style="width:100px; display: inline-block;" ng-readonly="true" disabled>
			</fieldset>	
			
			<fieldset style="margin-top:30px; margin-left:20px;"> 	
		     	<label for="region" style="display: inline-block; vertical-align: bottom;">
		     		Region: 
				</label>
				<input type="text" class="form-control" ng-model="getCH.region" style="width:200px; display: inline-block;" ng-readonly="true" disabled>
			</fieldset>
			
			<fieldset style="margin-top:30px; margin-left:20px;"> 	
		     	<label for="historicalPeriod" style="display: inline-block; vertical-align: bottom;">
		     		Historical period: 
				</label>
				<input type="text" class="form-control" ng-model="getCH.historicalPeriod" style="width:200px; display: inline-block;" ng-readonly="true" disabled>
			</fieldset>
			
			<fieldset style="margin-top:30px; margin-left:20px;"> 	
		     	<label for="typeOfStructure" style="display: inline-block; vertical-align: bottom;">
		     		Type of structure: 
				</label>
				<input type="text" class="form-control" ng-model="getCH.typeOfStructure" style="width:200px; display: inline-block;" ng-readonly="true" disabled>
			</fieldset>
			
			<fieldset style="margin-top:60px; margin-left:200px; margin-bottom:50px;"> 			
				<a href="#"ng-click="cancel()">Cancel</a>
			</fieldset>
  
		</div>

</body>
</html>
<script>
	var app = angular.module("GoPoleis", []);
	app.controller('getGame1Controller', function($scope, $http, $window) {
		$scope.getGame1Page=true;
		$scope.chPage=false;
	
		$http({
			method : "GET",
			url : "/getGame1CHs/statoitaliano@gmail.com"
		}).then(function mySucces(response) {
			$scope.results  = response.data;
		}, function myError(response) {
			$scope.results  = response.statusText;
		});
			
		
		$scope.getGame1CH = function(chCode){ 
			$scope.getGame1Page=false;
			$scope.chPage=true;
			$scope.getCH={};

			
			$http({
				method : "GET",
				url : "/getCH/"+chCode
			}).then(function mySucces(response) {
				results  = response.data;	
				if (results.length > 0){
					$scope.getCH.name = results[0].name;
					$scope.getCH.description = results[0].description;
					$scope.getCH.path = results[0].path;
					$scope.getCH.g1 = results[0].g1;
					$scope.getCH.g2 = results[0].g2;
					$scope.getCH.g3 = results[0].g3;
					$scope.getCH.g4 = results[0].g4;
					$scope.getCH.latitude = results[0].latitude;
					$scope.getCH.longitude = results[0].longitude;				
					$scope.getCH.region = results[0].region;
					$scope.getCH.province = results[0].province;
					$scope.getCH.historicalPeriod = results[0].historicalperiod;
					$scope.getCH.typeOfStructure = results[0].structuretype;
				}
			}, function myError(response) {
				$scope.results  = response.statusText;
			});
			
			parent.window.enableGame1SubButtons(true, chCode);
		}
		
		$scope.cancel = function(){ 
			window.location.reload();
			parent.window.enableGame1SubButtons(false, null);
		}	
			
	});
</script>